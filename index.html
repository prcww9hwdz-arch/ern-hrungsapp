<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Daniels Ernährungsplan – 10 Wochen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #050509;
      color: #f5f5f5;
    }
    header {
      background: linear-gradient(135deg, #111827, #020617);
      color: white;
      padding: 1.2rem 1.4rem;
      text-align: center;
      border-bottom: 1px solid #1f2937;
    }
    header h1 {
      margin: 0;
      font-size: 1.4rem;
    }
    header p {
      margin: 0.3rem 0 0;
      font-size: 0.85rem;
      opacity: 0.9;
    }
    header span.name {
      color: #f97373;
      font-weight: 600;
    }

    .tabs {
      display: flex;
      background: #020617;
      border-bottom: 1px solid #1f2937;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .tab {
      flex: 1;
      padding: 0.7rem;
      text-align: center;
      cursor: pointer;
      font-size: 0.9rem;
      color: #9ca3af;
      border-right: 1px solid #111827;
    }
    .tab:last-child { border-right: none; }
    .tab.active {
      color: #f9fafb;
      font-weight: 600;
      border-bottom: 2px solid #f97373;
      background: #0b1120;
    }

    main {
      padding: 1rem;
      max-width: 900px;
      margin: 0 auto 2rem;
    }

    .section { display: none; }
    .section.active { display: block; }

    .card {
      background: #020617;
      border-radius: 14px;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid #111827;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.7);
    }
    .card h2, .card h3 {
      margin-top: 0;
      font-size: 1.05rem;
    }
    .pill {
      display: inline-block;
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      font-size: 0.7rem;
      background: #111827;
      color: #f97373;
      margin-right: 0.3rem;
    }
    .kcal {
      color: #facc15;
      font-weight: 600;
    }
    .row {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 0.6rem;
    }
    select, input {
      padding: 0.4rem 0.5rem;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: 0.85rem;
      flex: 1;
      min-width: 120px;
    }
    button {
      padding: 0.45rem 0.9rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.85rem;
      background: #f97373;
      color: #020617;
      font-weight: 600;
    }
    button.secondary {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #1f2937;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
    }
    th, td {
      padding: 0.4rem 0.4rem;
      border-bottom: 1px solid #111827;
      text-align: left;
    }
    th {
      background: #020617;
      color: #e5e7eb;
      font-weight: 600;
    }
    ul {
      padding-left: 1.2rem;
      margin-top: 0.3rem;
    }
    li { margin-bottom: 0.15rem; font-size: 0.85rem; }

    details summary {
      cursor: pointer;
      font-size: 0.9rem;
      list-style: none;
      color: #e5e7eb;
      margin-bottom: 0.1rem;
    }
    details summary::-webkit-details-marker { display: none; }
    details summary::before {
      content: "▶ ";
      font-size: 0.7rem;
      color: #9ca3af;
    }
    details[open] summary::before {
      content: "▼ ";
    }

    .hint {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 0.3rem;
    }

    @media (min-width: 700px) {
      header h1 { font-size: 1.6rem; }
      .tab { font-size: 0.95rem; }
    }
  </style>
</head>
<body>
<header>
  <h1>Ernährungsplan für <span class="name">Daniel</span></h1>
  <p>10 Wochen · ca. 1.750–1.900 kcal/Tag · High Protein · warme Mittage · leichte Abende</p>
</header>

<div class="tabs">
  <div class="tab active" data-target="heute">Heute</div>
  <div class="tab" data-target="plan">Wochenplan</div>
  <div class="tab" data-target="rezepte-mittag">Mittag-Rezepte</div>
  <div class="tab" data-target="rezepte-abend">Abend-Rezepte</div>
  <div class="tab" data-target="gewicht">Gewicht</div>
</div>

<main>
  <!-- HEUTE -->
  <section id="heute" class="section active">
    <div class="card">
      <h2>Heute – Vorschlag (automatisch)</h2>
      <div class="row">
        <select id="heute-portion">
          <option value="0.9">0,9 Portion (etwas weniger)</option>
          <option value="1" selected>1,0 Portion (normal)</option>
          <option value="1.1">1,1 Portion (etwas mehr)</option>
        </select>
        <button id="heute-neu" class="secondary">Neu würfeln</button>
      </div>
      <p><span class="pill">Frühstück</span>
        <span id="heute-fruehstueck-text"></span>
        – <span class="kcal" id="heute-fruehstueck-kcal"></span>
      </p>
      <p><span class="pill">Mittag (warm, Mealprep)</span>
        <span id="heute-mittag-text"></span>
        – <span class="kcal" id="heute-mittag-kcal"></span>
      </p>
      <p><span class="pill">Abend (leicht)</span>
        <span id="heute-abend-text"></span>
        – <span class="kcal" id="heute-abend-kcal"></span>
      </p>
      <p><b>Gesamt:</b> <span class="kcal" id="heute-gesamt-kcal"></span> kcal</p>
      <p class="hint">Die Kombination wird anhand des Datums automatisch gewählt. Mit „Neu würfeln“ kannst du für heute andere Gerichte probieren.</p>
    </div>
  </section>

  <!-- WOCHENPLAN -->
  <section id="plan" class="section">
    <div class="card">
      <h2>10-Wochen-Plan (automatisch erzeugt)</h2>
      <p>Jede Woche 7 Tage mit konkreter Zuordnung von Mittag & Abend aus den Rezepten. Kalorien passen ungefähr zum Zielbereich.</p>
      <p class="hint">Die Reihenfolge wird automatisch aus den Rezeptlisten gebaut – du kannst sie flexibel tauschen.</p>
    </div>
    <div id="plan-container"></div>
  </section>

  <!-- MITTAG-REZEPTE -->
  <section id="rezepte-mittag" class="section">
    <div class="card">
      <h2>Warme Mittagessen (Mealprep · 20 Rezepte)</h2>
      <p class="hint">Alle Angaben pro Portion. Für 3–4 Tage vorkochen: Mengen entsprechend multiplizieren.</p>
    </div>
    <div id="mittags-rezepte-container"></div>
  </section>

  <!-- ABEND-REZEPTE -->
  <section id="rezepte-abend" class="section">
    <div class="card">
      <h2>Leichte Abendessen (20 Rezepte)</h2>
      <p class="hint">Alle Gerichte sind leicht, eiweißreich und schnell gemacht.</p>
    </div>
    <div id="abends-rezepte-container"></div>
  </section>

  <!-- GEWICHT -->
  <section id="gewicht" class="section">
    <div class="card">
      <h2>Gewichtsverlauf</h2>
      <div class="row">
        <input type="date" id="gewicht-datum" />
        <input type="number" step="0.1" id="gewicht-wert" placeholder="Gewicht in kg" />
        <button id="gewicht-speichern">Speichern</button>
      </div>
      <table>
        <thead>
          <tr><th>Datum</th><th>Gewicht (kg)</th></tr>
        </thead>
        <tbody id="gewicht-tabelle"></tbody>
      </table>
      <p class="hint">Die Werte werden nur im Browser auf diesem Gerät gespeichert (localStorage).</p>
    </div>
  </section>
</main>

<script>
  // Frühstück ist jeden Tag gleich (High-Protein-Standard)
  const breakfast = {
    name: "Skyr-Bowl (Skyr, Haferflocken, Beeren, Nüsse)",
    kcal: 450,
    ingredients: [
      "250 g Skyr oder Magerquark",
      "40 g Haferflocken",
      "100 g Beeren (TK oder frisch)",
      "10 g Nüsse (z.B. Walnüsse oder Mandeln)",
      "optional: 1 TL Honig oder Süßstoff"
    ]
  };

  // 20 warme Mittagessen (Mealprep-tauglich) – kcal pro Portion
  const lunches = [
    {
      name: "Hähnchen-Reis-Bowl mit Brokkoli",
      kcal: 700,
      ingredients: [
        "150 g Hähnchenbrust",
        "60 g Reis (roh, ca. 180 g gekocht)",
        "200 g Brokkoli (frisch oder TK)",
        "5 g Öl",
        "Gewürze (Paprika, Salz, Pfeffer)"
      ],
      prep: [
        "Reis nach Packung kochen.",
        "Hähnchen würzen, in etwas Öl anbraten.",
        "Brokkoli bissfest garen.",
        "Alles in Boxen aufteilen – hält 2–3 Tage im Kühlschrank."
      ]
    },
    {
      name: "Linsencurry mit Reis",
      kcal: 720,
      ingredients: [
        "70 g rote Linsen (roh)",
        "50 g Reis (roh)",
        "150 g stückige Tomaten",
        "100 g Karotten",
        "100 g Zucchini",
        "5 g Öl, Curry, Salz"
      ],
      prep: [
        "Linsen mit Tomaten und Wasser köcheln.",
        "Gemüse würfeln und mitgaren.",
        "Reis separat kochen.",
        "Mit Curry und Salz abschmecken, zusammen servieren."
      ]
    },
    {
      name: "Chili con Carne (mager)",
      kcal: 730,
      ingredients: [
        "130 g Rinderhack (mager)",
        "150 g stückige Tomaten",
        "80 g Kidneybohnen (abgetropft)",
        "50 g Mais (abgetropft)",
        "50 g Reis (roh)",
        "Gewürze (Chili, Paprika, Salz)"
      ],
      prep: [
        "Hackfleisch anbraten.",
        "Bohnen, Mais, Tomaten zugeben.",
        "Mit Gewürzen abschmecken und 15–20 Min köcheln.",
        "Reis kochen, zusammen in Dosen füllen."
      ]
    },
    {
      name: "Puten-Gemüse-Pfanne mit Kartoffeln",
      kcal: 710,
      ingredients: [
        "150 g Putenbrust",
        "200 g Kartoffeln",
        "150 g Gemüse (Paprika, Zucchini, Zwiebel)",
        "5 g Öl",
        "Gewürze"
      ],
      prep: [
        "Kartoffeln in Würfel schneiden und vorkochen.",
        "Pute in Streifen schneiden, würzen und anbraten.",
        "Gemüse dazugeben und mitbraten.",
        "Kartoffeln unterheben, ggf. nachwürzen."
      ]
    },
    {
      name: "Lachs mit Ofengemüse",
      kcal: 740,
      ingredients: [
        "140 g Lachsfilet",
        "200 g Kartoffeln oder Süßkartoffeln",
        "150 g Gemüse (z.B. Karotten, Zucchini, Paprika)",
        "5 g Öl",
        "Zitrone, Salz, Pfeffer"
      ],
      prep: [
        "Gemüse und Kartoffeln in Stücke schneiden.",
        "Mit Öl und Gewürzen mischen, auf Blech geben.",
        "Lachs oben drauf, mit Zitrone beträufeln.",
        "Bei 180–200 °C ca. 20–25 Min backen."
      ]
    },
    {
      name: "Thunfisch-Vollkornpasta",
      kcal: 710,
      ingredients: [
        "70 g Vollkornnudeln (roh)",
        "1 Dose Thunfisch in Wasser (abgetropft ~100 g)",
        "150 g stückige Tomaten",
        "50 g Mais",
        "20 g Frischkäse leicht"
      ],
      prep: [
        "Nudeln kochen.",
        "Thunfisch, Tomaten, Mais in Topf erwärmen.",
        "Frischkäse unterrühren, würzen.",
        "Mit Nudeln mischen, in Box füllen."
      ]
    },
    {
      name: "Rinderstreifen mit Paprika & Reis",
      kcal: 740,
      ingredients: [
        "150 g mageres Rindfleisch",
        "60 g Reis (roh)",
        "150 g Paprika",
        "50 g Zwiebel",
        "5 g Öl, Gewürze"
      ],
      prep: [
        "Reis kochen.",
        "Rind in Streifen schneiden, scharf anbraten.",
        "Paprika & Zwiebel dazugeben, mitgaren.",
        "Würzen und mit Reis portionieren."
      ]
    },
    {
      name: "Hähnchen-Curry mit Kokos light",
      kcal: 720,
      ingredients: [
        "150 g Hähnchenbrust",
        "60 g Reis (roh)",
        "150 g Gemüse (Karotte, Erbsen, Paprika)",
        "50 ml Kokosmilch light",
        "Curry, Salz"
      ],
      prep: [
        "Reis kochen.",
        "Hähnchen anbraten, Gemüse dazu.",
        "Mit Curry und Kokosmilch ablöschen, köcheln.",
        "Mit Reis servieren."
      ]
    },
    {
      name: "Ofenblech: Hähnchen & Gemüse",
      kcal: 700,
      ingredients: [
        "150 g Hähnchenbrust",
        "250 g Gemüse (Kartoffeln, Karotten, Zucchini, Paprika)",
        "5 g Öl",
        "Gewürze (Paprika, Knoblauch, Kräuter)"
      ],
      prep: [
        "Gemüse und Hähnchen in Stücke schneiden.",
        "Mit Öl und Gewürzen mischen.",
        "Auf Blech verteilen, bei 190 °C ca. 25–30 Min backen."
      ]
    },
    {
      name: "Pasta Bolognese (light)",
      kcal: 730,
      ingredients: [
        "70 g Vollkornnudeln (roh)",
        "120 g mageres Rinderhack",
        "150 g stückige Tomaten",
        "50 g Karotte",
        "Zwiebel, Knoblauch"
      ],
      prep: [
        "Hackfleisch mit Zwiebel/Knoblauch anbraten.",
        "Tomaten und fein geriebene Karotte dazugeben.",
        "Köcheln lassen, würzen.",
        "Nudeln kochen, alles kombinieren."
      ]
    },
    {
      name: "Türkische Bulgurpfanne mit Pute",
      kcal: 720,
      ingredients: [
        "60 g Bulgur (roh)",
        "150 g Putenbrust",
        "150 g Paprika/Zucchini",
        "50 g Zwiebel",
        "5 g Öl, Gewürze"
      ],
      prep: [
        "Bulgur in Brühe garen.",
        "Pute würzen und anbraten.",
        "Gemüse würfeln und mitbraten.",
        "Mit Bulgur mischen."
      ]
    },
    {
      name: "Süßkartoffel-Hack-Blech",
      kcal: 750,
      ingredients: [
        "150 g mageres Hack",
        "200 g Süßkartoffel",
        "150 g Paprika/Zwiebel",
        "5 g Öl, Gewürze"
      ],
      prep: [
        "Süßkartoffel in Würfel schneiden.",
        "Mit Gemüse und Hack mischen, würzen.",
        "Auf Blech verteilen, 25–30 Min bei 190 °C backen."
      ]
    },
    {
      name: "Linsen-Bolognese",
      kcal: 690,
      ingredients: [
        "70 g rote Linsen",
        "60 g Vollkornnudeln",
        "150 g stückige Tomaten",
        "100 g Gemüse (Karotte/Zwiebel)"
      ],
      prep: [
        "Linsen mit Tomaten und Wasser köcheln.",
        "Gemüse hacken und mitkochen.",
        "Nudeln kochen, zusammen servieren."
      ]
    },
    {
      name: "Mediterrane Reis-Hähnchen-Pfanne",
      kcal: 710,
      ingredients: [
        "60 g Reis (roh)",
        "150 g Hähnchen",
        "150 g Gemüse (Zucchini, Paprika, Tomate)",
        "5 g Öl, italienische Kräuter"
      ],
      prep: [
        "Reis kochen.",
        "Hähnchen anbraten.",
        "Gemüse in Würfel, mitbraten.",
        "Mit Kräutern abschmecken, Reis unterheben."
      ]
    },
    {
      name: "Kichererbsen-Curry mit Reis",
      kcal: 710,
      ingredients: [
        "60 g Reis (roh)",
        "120 g Kichererbsen (abgetropft)",
        "150 g stückige Tomaten",
        "100 g Gemüse",
        "5 g Öl, Curry, Salz"
      ],
      prep: [
        "Reis kochen.",
        "Gemüse in Öl anbraten.",
        "Kichererbsen und Tomaten zufügen.",
        "Mit Curry würzen, köcheln lassen."
      ]
    },
    {
      name: "Puten-Gyros mit Ofengemüse",
      kcal: 730,
      ingredients: [
        "150 g Pute",
        "200 g Kartoffeln",
        "150 g Paprika/Zwiebel",
        "5 g Öl, Gyrosgewürz"
      ],
      prep: [
        "Pute in Streifen schneiden, würzen.",
        "Kartoffeln & Gemüse in Stücke schneiden.",
        "Alles mit Öl mischen, auf Blech geben, 25 Min backen."
      ]
    },
    {
      name: "Lachs-Reis-Bowl",
      kcal: 740,
      ingredients: [
        "140 g Lachs",
        "60 g Reis (roh)",
        "150 g Gemüse (z.B. Brokkoli/Erbsen)",
        "5 g Öl/Zitrone"
      ],
      prep: [
        "Reis kochen.",
        "Lachs würzen, anbraten oder backen.",
        "Gemüse garen.",
        "Alles in Bowl/Box anrichten."
      ]
    },
    {
      name: "Hackpfanne Mexiko",
      kcal: 720,
      ingredients: [
        "130 g mageres Hack",
        "100 g Mais",
        "80 g Kidneybohnen",
        "150 g stückige Tomaten",
        "50 g Reis (roh)"
      ],
      prep: [
        "Hack anbraten.",
        "Mais, Bohnen, Tomaten dazu.",
        "Mit Chili/Paprika würzen.",
        "Reis kochen, alles zusammen servieren."
      ]
    },
    {
      name: "One-Pot-Pasta Hähnchen",
      kcal: 720,
      ingredients: [
        "70 g Vollkornnudeln",
        "130 g Hähnchen",
        "150 g stückige Tomaten",
        "100 g Gemüse",
        "Brühe, Gewürze"
      ],
      prep: [
        "Hähnchen kurz anbraten.",
        "Nudeln, Tomaten, Gemüse und Brühe dazu.",
        "Alles in einem Topf kochen bis Garzeit erreicht."
      ]
    },
    {
      name: "Bulgursalat mit Hähnchen (warm/kalt)",
      kcal: 700,
      ingredients: [
        "60 g Bulgur",
        "130 g Hähnchen",
        "150 g Tomate/Gurke/Paprika",
        "10 g Olivenöl, Zitronensaft"
      ],
      prep: [
        "Bulgur in heißer Brühe ziehen lassen.",
        "Hähnchen anbraten.",
        "Gemüse klein schneiden.",
        "Alles mit Öl/Zitrone mischen."
      ]
    }
  ];

  // 20 leichte Abendessen – kcal pro Portion
  const dinners = [
    {
      name: "Großer Thunfischsalat",
      kcal: 450,
      ingredients: [
        "1 Dose Thunfisch in Wasser (~100 g)",
        "150 g gemischter Salat",
        "100 g Tomate/Gurke/Paprika",
        "20 g Feta light",
        "10 g Olivenöl + Essig"
      ],
      prep: [
        "Salat waschen, Gemüse schneiden.",
        "Thunfisch abtropfen.",
        "Alles in Schüssel, Feta und Dressing dazu."
      ]
    },
    {
      name: "Skyr + Obst + Nüsse",
      kcal: 420,
      ingredients: [
        "250 g Skyr",
        "150 g Obst (z.B. Apfel, Beeren, Banane)",
        "10–15 g Nüsse",
        "Zimt nach Geschmack"
      ],
      prep: [
        "Skyr in Schüssel.",
        "Obst klein schneiden und dazugeben.",
        "Nüsse und Zimt drüber."
      ]
    },
    {
      name: "Hüttenkäse-Teller",
      kcal: 430,
      ingredients: [
        "200 g körniger Frischkäse",
        "150 g Gemüsesticks (Gurke, Paprika, Karotte)",
        "1 Scheibe Vollkornbrot (~40 g)",
        "etwas Salz/Pfeffer"
      ],
      prep: [
        "Gemüse in Sticks schneiden.",
        "Hüttenkäse würzen.",
        "Mit Brot servieren."
      ]
    },
    {
      name: "Rührei mit Gemüse",
      kcal: 450,
      ingredients: [
        "2 Eier",
        "100 g Eiklar (Eiweiß, flüssig)",
        "150 g Gemüse (Paprika, Zwiebel, Spinat)",
        "5 g Öl"
      ],
      prep: [
        "Gemüse klein schneiden und anbraten.",
        "Eier und Eiklar verquirlen, dazu geben.",
        "Stocken lassen, abschmecken."
      ]
    },
    {
      name: "Mediterraner Salat mit Pute",
      kcal: 460,
      ingredients: [
        "120 g Putenstreifen",
        "150 g Salat",
        "80 g Tomate",
        "50 g Gurke",
        "20 g Feta light",
        "10 g Olivenöl"
      ],
      prep: [
        "Pute anbraten, würzen.",
        "Salat/Gemüse schneiden.",
        "Mit Feta und Öl mischen, Pute oben drauf."
      ]
    },
    {
      name: "Tomate-Mozzarella light",
      kcal: 430,
      ingredients: [
        "150 g Tomaten",
        "60 g Mozzarella light",
        "10 g Olivenöl",
        "Basilikum, Balsamico",
        "1 Scheibe Vollkornbrot (~40 g)"
      ],
      prep: [
        "Tomaten und Mozzarella in Scheiben.",
        "Mit Öl, Balsamico, Basilikum anrichten.",
        "Mit Brot servieren."
      ]
    },
    {
      name: "Joghurt-Bowl",
      kcal: 400,
      ingredients: [
        "250 g Naturjoghurt (1,5 %)",
        "40 g zuckerarmes Müsli oder Hafer",
        "100 g Beeren/Obst"
      ],
      prep: [
        "Joghurt in Schüssel.",
        "Müsli und Obst dazugeben."
      ]
    },
    {
      name: "Eier & Brot",
      kcal: 450,
      ingredients: [
        "2 Eier",
        "2 Scheiben Vollkornbrot (ca. 80 g)",
        "Tomate/Gurke als Beilage"
      ],
      prep: [
        "Eier kochen oder als Rührei.",
        "Brot toasten oder so essen.",
        "Mit Gemüse anrichten."
      ]
    },
    {
      name: "Gemüsesuppe (satt, leicht)",
      kcal: 380,
      ingredients: [
        "250 g Gemüsemix (TK oder frisch)",
        "300 ml Brühe",
        "optional 50 g Hähnchenwürfel",
        "Gewürze"
      ],
      prep: [
        "Gemüse in Brühe weich kochen.",
        "Optional Hähnchen hinzugeben.",
        "Würzen – fertig."
      ]
    },
    {
      name: "Protein-Salatbowl",
      kcal: 460,
      ingredients: [
        "150 g Salat",
        "80 g Kichererbsen (abgetropft)",
        "80 g Thunfisch oder Pute",
        "20 g Joghurt-Dressing"
      ],
      prep: [
        "Kichererbsen abspülen.",
        "Salat schneiden.",
        "Mit Thunfisch/Pute und Dressing mischen."
      ]
    },
    {
      name: "Ofengemüse + Hüttenkäse",
      kcal: 440,
      ingredients: [
        "200 g Gemüse (z.B. Paprika, Zucchini, Karotte)",
        "5 g Öl",
        "150 g Hüttenkäse"
      ],
      prep: [
        "Gemüse in Stücke schneiden.",
        "Mit Öl und Gewürzen in Ofen (190 °C, ca. 20 Min).",
        "Mit Hüttenkäse servieren."
      ]
    },
    {
      name: "Wrap light",
      kcal: 450,
      ingredients: [
        "1 Vollkornwrap (~60 g)",
        "80 g Pute oder Hähnchen",
        "50 g Salat",
        "50 g Tomate/Gurke",
        "20 g Joghurt-Sauce"
      ],
      prep: [
        "Pute/Hähnchen braten.",
        "Gemüse schneiden.",
        "Alles in Wrap einrollen."
      ]
    },
    {
      name: "Skyr mit Apfel & Zimt",
      kcal: 400,
      ingredients: [
        "250 g Skyr",
        "1 mittelgroßer Apfel",
        "10 g Nüsse",
        "Zimt"
      ],
      prep: [
        "Skyr in Schüssel.",
        "Apfel würfeln, dazugeben.",
        "Mit Nüssen und Zimt toppen."
      ]
    },
    {
      name: "Feta-Gemüse-Pfanne",
      kcal: 450,
      ingredients: [
        "200 g Gemüse (Zucchini, Paprika, Tomate)",
        "10 g Öl",
        "40 g Feta light"
      ],
      prep: [
        "Gemüse in Pfanne mit Öl anbraten.",
        "Mit Salz/Kräutern würzen.",
        "Feta darüber bröseln."
      ]
    },
    {
      name: "Eiersalat light",
      kcal: 430,
      ingredients: [
        "2 Eier",
        "100 g Magerquark",
        "50 g Joghurt 1,5 %",
        "Senf, Gewürze",
        "1 Scheibe Vollkornbrot"
      ],
      prep: [
        "Eier kochen, klein schneiden.",
        "Mit Quark, Joghurt, Senf mischen.",
        "Mit Brot essen."
      ]
    },
    {
      name: "Caprese-Salat + Hähnchen",
      kcal: 480,
      ingredients: [
        "150 g Tomaten",
        "60 g Mozzarella light",
        "100 g Hähnchenstreifen",
        "10 g Olivenöl, Balsamico"
      ],
      prep: [
        "Tomaten/Mozzarella schneiden.",
        "Hähnchen anbraten.",
        "Alles auf Teller mit Dressing."
      ]
    },
    {
      name: "Kalte Reis-Gemüse-Bowl",
      kcal: 430,
      ingredients: [
        "80 g gekochter Reis (Rest vom Mittag)",
        "150 g Rohkost (Paprika, Gurke, Karotte)",
        "100 g Hüttenkäse oder Thunfisch"
      ],
      prep: [
        "Reis in Schüssel.",
        "Gemüse und Protein dazugeben.",
        "Mit Gewürzen abschmecken."
      ]
    },
    {
      name: "Quark-Creme mit Beeren",
      kcal: 420,
      ingredients: [
        "250 g Magerquark",
        "100 g Beeren",
        "Süßstoff oder 1 TL Honig",
        "10 g Nüsse"
      ],
      prep: [
        "Quark glattrühren.",
        "Beeren, Süße und Nüsse dazugeben."
      ]
    },
    {
      name: "Gemischter Salat + Ei",
      kcal: 400,
      ingredients: [
        "150 g Salat",
        "100 g Gemüse",
        "2 Eier",
        "10 g Öl + Essig"
      ],
      prep: [
        "Eier kochen, vierteln.",
        "Salat/Gemüse schneiden.",
        "Mit Dressing mischen, Eier oben drauf."
      ]
    },
    {
      name: "Proteinshake + Obst",
      kcal: 380,
      ingredients: [
        "30 g Whey-Protein",
        "300 ml Wasser oder Milch",
        "1 Banane oder Apfel"
      ],
      prep: [
        "Shake im Shaker mischen.",
        "Obst dazu essen."
      ]
    }
  ];

  // ---------- Hilfsfunktionen ----------

  const tabs = document.querySelectorAll(".tab");
  const sections = document.querySelectorAll(".section");
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      sections.forEach(s => s.classList.remove("active"));
      tab.classList.add("active");
      document.getElementById(tab.dataset.target).classList.add("active");
    });
  });

  function pseudoRandomFromDate(mod) {
    const today = new Date();
    const day = today.getDate();
    const month = today.getMonth() + 1;
    const year = today.getFullYear();
    const seed = day + month * 31 + year * 7;
    return seed % mod;
  }

  function renderHeute() {
    const portion = parseFloat(document.getElementById("heute-portion").value) || 1;
    const baseIndex = pseudoRandomFromDate(1000);

    const lunchIndex = baseIndex % lunches.length;
    const dinnerIndex = (baseIndex * 7 + 3) % dinners.length;

    const lunch = lunches[lunchIndex];
    const dinner = dinners[dinnerIndex];

    const bfKcal = breakfast.kcal * portion;
    const luKcal = lunch.kcal * portion;
    const diKcal = dinner.kcal * portion;
    const total = bfKcal + luKcal + diKcal;

    document.getElementById("heute-fruehstueck-text").textContent = breakfast.name;
    document.getElementById("heute-fruehstueck-kcal").textContent = `${bfKcal.toFixed(0)} kcal`;

    document.getElementById("heute-mittag-text").textContent = lunch.name;
    document.getElementById("heute-mittag-kcal").textContent = `${luKcal.toFixed(0)} kcal`;

    document.getElementById("heute-abend-text").textContent = dinner.name;
    document.getElementById("heute-abend-kcal").textContent = `${diKcal.toFixed(0)} kcal`;

    document.getElementById("heute-gesamt-kcal").textContent = total.toFixed(0);
  }

  document.getElementById("heute-portion").addEventListener("change", renderHeute);
  document.getElementById("heute-neu").addEventListener("click", () => {
    renderHeute(); // neue Kombination (weil Datum-Seed gleich, aber wir könnten hier optional random machen)
  });

  // Wochenplan automatisch: 10 Wochen á 7 Tage aus den Rezeptlisten bauen
  function buildPlan() {
    const daysPerWeek = 7;
    const totalDays = 10 * daysPerWeek;
    const plan = [];
    for (let i = 0; i < totalDays; i++) {
      const week = Math.floor(i / daysPerWeek) + 1;
      const dayInWeek = (i % daysPerWeek) + 1;
      const lunchIndex = i % lunches.length;
      const dinnerIndex = (i * 3) % dinners.length;

      plan.push({
        week,
        dayInWeek,
        breakfast,
        lunch: lunches[lunchIndex],
        dinner: dinners[dinnerIndex]
      });
    }
    return plan;
  }

  function renderPlan() {
    const plan = buildPlan();
    const container = document.getElementById("plan-container");
    container.innerHTML = "";

    for (let w = 1; w <= 10; w++) {
      const weekDays = plan.filter(d => d.week === w);
      const weekCard = document.createElement("div");
      weekCard.className = "card";

      let inner = `<h3>Woche ${w}</h3><table><thead>
        <tr><th>Tag</th><th>Frühstück</th><th>Mittag</th><th>Abend</th><th>Gesamt kcal</th></tr>
      </thead><tbody>`;

      weekDays.forEach(d => {
        const total = d.breakfast.kcal + d.lunch.kcal + d.dinner.kcal;
        inner += `
          <tr>
            <td>Tag ${d.dayInWeek}</td>
            <td>${d.breakfast.name}</td>
            <td>${d.lunch.name}</td>
            <td>${d.dinner.name}</td>
            <td>${total}</td>
          </tr>
        `;
      });

      inner += "</tbody></table>";
      weekCard.innerHTML = inner;
      container.appendChild(weekCard);
    }
  }

  function renderRecipeList(list, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = "";
    list.forEach(r => {
      const card = document.createElement("div");
      card.className = "card";
      const ing = r.ingredients.map(i => `<li>${i}</li>`).join("");
      const prep = r.prep.map(s => `<li>${s}</li>`).join("");
      card.innerHTML = `
        <details>
          <summary>${r.name} – ca. <span class="kcal">${r.kcal} kcal</span></summary>
          <p><b>Zutaten (pro Portion):</b></p>
          <ul>${ing}</ul>
          <p><b>Zubereitung:</b></p>
          <ul>${prep}</ul>
        </details>
      `;
      container.appendChild(card);
    });
  }

  function loadWeights() {
    try {
      return JSON.parse(localStorage.getItem("daniel_ernaehrung_weights") || "[]");
    } catch {
      return [];
    }
  }
  function saveWeights(data) {
    localStorage.setItem("daniel_ernaehrung_weights", JSON.stringify(data));
  }
  function renderWeights() {
    const tbody = document.getElementById("gewicht-tabelle");
    const data = loadWeights().sort((a, b) => a.date.localeCompare(b.date));
    tbody.innerHTML = data.map(e => `
      <tr><td>${e.date}</td><td>${parseFloat(e.weight).toFixed(1)}</td></tr>
    `).join("");
  }
  function setupWeight() {
    const dateInput = document.getElementById("gewicht-datum");
    const weightInput = document.getElementById("gewicht-wert");
    const today = new Date().toISOString().slice(0, 10);
    dateInput.value = today;

    document.getElementById("gewicht-speichern").addEventListener("click", () => {
      const date = dateInput.value;
      const weight = parseFloat((weightInput.value || "").replace(",", "."));
      if (!date || isNaN(weight)) {
        alert("Bitte Datum und Gewicht eingeben.");
        return;
      }
      const data = loadWeights();
      const existing = data.find(d => d.date === date);
      if (existing) existing.weight = weight;
      else data.push({ date, weight });
      saveWeights(data);
      renderWeights();
      weightInput.value = "";
    });
  }

  // Init
  renderHeute();
  renderPlan();
  renderRecipeList(lunches, "mittags-rezepte-container");
  renderRecipeList(dinners, "abends-rezepte-container");
  setupWeight();
  renderWeights();
</script>
</body>
</html>