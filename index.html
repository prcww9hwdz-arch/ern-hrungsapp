<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>10-Wochen Ern√§hrungsplan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #111;
      color: #eee;
      margin: 0;
      padding: 16px;
    }
    h1, h2 {
      color: #4CAF50;
      margin-top: 0;
    }
    .card {
      background: #1f1f1f;
      border-radius: 10px;
      padding: 12px 14px;
      margin-bottom: 14px;
    }
    select, input {
      width: 100%;
      padding: 8px;
      margin: 4px 0 8px;
      border-radius: 6px;
      border: 1px solid #444;
      background: #181818;
      color: #eee;
      font-size: 0.9rem;
    }
    button {
      background: #4CAF50;
      border: none;
      color: #fff;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      margin-top: 6px;
    }
    .meal-item, .shopping-item, .weight-item {
      padding: 4px 0;
      border-bottom: 1px solid #333;
      font-size: 0.9rem;
    }
    .meal-item:last-child,
    .shopping-item:last-child,
    .weight-item:last-child {
      border-bottom: none;
    }
    .kcal {
      color: #ffb74d;
      font-weight: 600;
    }
    details summary {
      cursor: pointer;
      list-style: none;
      font-weight: 600;
      margin-bottom: 4px;
    }
    details summary::-webkit-details-marker { display: none; }
    details summary::before {
      content: "‚ñ∂ ";
      font-size: 0.75rem;
    }
    details[open] summary::before {
      content: "‚ñº ";
    }
    small { color: #aaa; }
  </style>
</head>
<body>

<h1>10-Wochen Ern√§hrungsplan</h1>
<p>Ca. 1750‚Äì1900 kcal pro Tag ‚Ä¢ High Protein + etwas mediterran ‚Ä¢ 3 Mahlzeiten/Tag</p>

<div class="card">
  <h2>Woche & Tag w√§hlen</h2>
  <label>Woche (1‚Äì10):</label>
  <select id="weekSelect"></select>

  <label>Tag:</label>
  <select id="daySelect"></select>
</div>

<div class="card">
  <h2>Plan f√ºr diesen Tag</h2>
  <div id="dayMeals"></div>
  <p><b>Gesamtkalorien:</b> <span id="dayTotal" class="kcal"></span> kcal</p>
  <small>Alle Werte sind Sch√§tzungen ‚Äì Zielbereich etwa 1750‚Äì1900 kcal.</small>
</div>

<div class="card">
  <h2>Rezepte zu diesem Tag</h2>
  <div id="dayRecipes"></div>
</div>

<div class="card">
  <h2>Einkaufsliste f√ºr die Woche</h2>
  <div id="shoppingList"></div>
  <small>Mengen sind grob f√ºr 1 Person f√ºr 7 Tage. Falls du gr√∂√üer/hungriger bist, etwas aufrunden.</small>
</div>

<div class="card">
  <h2>Gewicht tracken</h2>
  <input type="date" id="weightDate">
  <input type="number" id="weightNumber" placeholder="Gewicht in kg">
  <button id="saveWeightBtn">Speichern</button>
  <div id="weightHistory"></div>
</div>

<div class="card">
  <h2>Alle Rezepte (√úbersicht)</h2>
  <div id="allRecipes"></div>
</div>

<script>
// ----------------------------
// Rezepte mit Mengen & Kalorien
// ----------------------------

const recipes = [
  {
    id: "overnightOats",
    name: "Overnight Oats mit Beeren",
    portions: 1,
    kcalPerPortion: 430,
    ingredients: [
      "50 g Haferflocken",
      "200 g Skyr (oder Naturjoghurt mager)",
      "100 ml Milch oder Wasser",
      "80 g Beeren (frisch oder TK)",
      "5 g Honig oder S√º√üstoff nach Wahl"
    ],
    steps: [
      "Haferflocken, Skyr und Milch/Wasser in eine Sch√ºssel oder ein Glas geben.",
      "Gut verr√ºhren, bis eine cremige Masse entsteht.",
      "Beeren unterheben oder oben drauf verteilen.",
      "Mit etwas Honig oder S√º√üstoff abschmecken.",
      "√úber Nacht im K√ºhlschrank ziehen lassen."
    ]
  },
  {
    id: "quarkBowl",
    name: "Quark-Bowl Banane-Mandel",
    portions: 1,
    kcalPerPortion: 450,
    ingredients: [
      "250 g Magerquark",
      "30 g Haferflocken",
      "1 mittelgro√üe Banane (ca. 100 g)",
      "15 g Mandeln",
      "etwas Wasser oder Milch zum Glattr√ºhren"
    ],
    steps: [
      "Quark in eine Sch√ºssel geben und mit etwas Wasser/Milch cremig r√ºhren.",
      "Haferflocken unterr√ºhren.",
      "Banane in Scheiben schneiden und dazugeben.",
      "Mandeln grob hacken und oben drauf streuen."
    ]
  },
  {
    id: "proteinMuffins",
    name: "Protein-Muffins (Mealprep)",
    portions: 6, // 6 Muffins
    kcalPerPortion: 140,
    ingredients: [
      "2 reife Bananen (ca. 200 g)",
      "2 Eier",
      "250 g Magerquark",
      "120 g Haferflocken",
      "10 g Backpulver"
    ],
    steps: [
      "Backofen auf 180 ¬∞C vorheizen.",
      "Bananen zerdr√ºcken, mit Eiern und Quark verr√ºhren.",
      "Haferflocken und Backpulver unterheben.",
      "Teig in 6 Muffinf√∂rmchen f√ºllen.",
      "Ca. 20‚Äì25 Minuten backen, abk√ºhlen lassen.",
      "Im K√ºhlschrank 3‚Äì4 Tage haltbar, ideal als Fr√ºhst√ºck oder Snack."
    ]
  },
  {
    id: "chickenRice",
    name: "H√§hnchen-Reis-Gem√ºse-Bowl",
    portions: 3,
    kcalPerPortion: 600,
    ingredients: [
      "450 g H√§hnchenbrust (150 g pro Portion)",
      "210 g Reis roh (70 g pro Portion)",
      "600 g Gem√ºse (z.B. Brokkoli, Paprika, Zucchini)",
      "1 EL Oliven√∂l (ca. 10 g)",
      "Gew√ºrze (Salz, Pfeffer, Paprika, Knoblauch)"
    ],
    steps: [
      "Reis nach Packungsanleitung kochen.",
      "H√§hnchen in St√ºcke schneiden, w√ºrzen und in etwas √ñl anbraten.",
      "Gem√ºse schneiden und mitbraten oder d√ºnsten.",
      "Alles auf 3 Boxen verteilen (Mealprep)."
    ]
  },
  {
    id: "tunaPasta",
    name: "Thunfisch-Vollkornpasta",
    portions: 3,
    kcalPerPortion: 580,
    ingredients: [
      "210 g Vollkornnudeln roh (70 g pro Portion)",
      "3 Dosen Thunfisch im Wasser (√† ca. 120 g, abgetropft)",
      "600 g gehackte Tomaten (Dose oder Packung)",
      "150 g Mais oder Paprika",
      "Gew√ºrze (Oregano, Basilikum, Salz, Pfeffer)"
    ],
    steps: [
      "Vollkornnudeln kochen.",
      "Thunfisch abgie√üen.",
      "Tomaten mit Gew√ºrzen erhitzen, Mais/Paprika dazugeben.",
      "Thunfisch unterr√ºhren, dann Nudeln untermischen.",
      "Auf 3 Portionen verteilen."
    ]
  },
  {
    id: "chili",
    name: "Chili con Carne (mager)",
    portions: 4,
    kcalPerPortion: 540,
    ingredients: [
      "600 g mageres Rinderhack",
      "2 Dosen Kidneybohnen (je ~240 g Abtropfgewicht)",
      "1 Dose Mais (~150 g Abtropfgewicht)",
      "800 g gehackte Tomaten",
      "1‚Äì2 Zwiebeln",
      "Gew√ºrze (Chili, Paprika, Salz, Pfeffer)"
    ],
    steps: [
      "Hackfleisch in einer gro√üen Pfanne oder einem Topf anbraten.",
      "Zwiebeln kleinschneiden und mit anbraten.",
      "Tomaten, Bohnen und Mais hinzugeben.",
      "Mit Chili, Paprika, Salz und Pfeffer abschmecken.",
      "Ca. 20 Minuten k√∂cheln lassen und auf 4 Portionen aufteilen."
    ]
  },
  {
    id: "salmonPotato",
    name: "Lachs mit Kartoffeln & Gem√ºse",
    portions: 3,
    kcalPerPortion: 620,
    ingredients: [
      "450‚Äì500 g Lachsfilet (ca. 150‚Äì170 g pro Portion)",
      "600 g Kartoffeln (200 g pro Portion)",
      "600 g Gem√ºse (z.B. Zucchini, Paprika, Brokkoli)",
      "1‚Äì2 EL Oliven√∂l",
      "Zitrone, Salz, Pfeffer"
    ],
    steps: [
      "Backofen auf 180‚Äì200 ¬∞C vorheizen.",
      "Kartoffeln in St√ºcke schneiden, mit etwas √ñl und Salz mischen, ca. 25‚Äì30 Min backen.",
      "Lachs w√ºrzen (Salz, Pfeffer, Zitrone) und die letzten 12‚Äì15 Min mit in den Ofen legen.",
      "Gem√ºse garen (mitbacken oder in der Pfanne).",
      "Alles auf 3 Portionen verteilen."
    ]
  },
  {
    id: "couscousTurkey",
    name: "Puten-Couscous-Pfanne",
    portions: 3,
    kcalPerPortion: 580,
    ingredients: [
      "450 g Putenbrust",
      "210 g Couscous roh (70 g pro Portion)",
      "600 g Gem√ºse (Paprika, Zucchini, Karotten)",
      "Br√ºhe, Gew√ºrze, 1 EL Oliven√∂l"
    ],
    steps: [
      "Couscous mit hei√üer Br√ºhe √ºbergie√üen und ziehen lassen.",
      "Pute in Streifen schneiden, w√ºrzen und in wenig √ñl anbraten.",
      "Gem√ºse kleinschneiden und mitbraten.",
      "Alles vermischen und auf 3 Portionen verteilen."
    ]
  },
  {
    id: "lightDinner",
    name: "Leichtes Abendessen (Salat + Ei/Thunfisch)",
    portions: 1,
    kcalPerPortion: 450,
    ingredients: [
      "80 g Blattsalat oder gemischter Salat",
      "100 g Gurke, 80 g Tomate",
      "2 Eier oder 1 Dose Thunfisch im Wasser",
      "10 g Oliven√∂l, Essig, Gew√ºrze"
    ],
    steps: [
      "Salat waschen und in eine Sch√ºssel geben.",
      "Gem√ºse klein schneiden und dazugeben.",
      "Eier hart kochen und vierteln ODER Thunfisch abgie√üen.",
      "Mit Oliven√∂l, Essig, Salz, Pfeffer anmachen."
    ]
  },
  {
    id: "skyrFruit",
    name: "Skyr mit Obst & N√ºssen",
    portions: 1,
    kcalPerPortion: 380,
    ingredients: [
      "250 g Skyr",
      "1 Apfel oder 1 Banane (ca. 100‚Äì120 g)",
      "10‚Äì15 g N√ºsse",
      "optional etwas Zimt oder S√º√üstoff"
    ],
    steps: [
      "Skyr in eine Sch√ºssel geben.",
      "Obst in St√ºcke schneiden und dazugeben.",
      "N√ºsse hacken und dar√ºber streuen.",
      "Nach Wunsch mit Zimt/S√º√üstoff verfeinern."
    ]
  }
];

const recipesById = {};
recipes.forEach(r => { recipesById[r.id] = r; });

// ----------------------------
// T√§glicher Plan (Woche 1‚Äì10)
// Jede Woche 7 Tage, 3 Rezepte/Tag
// ----------------------------

const dailyPlan = {
  1: [ // Woche 1
    { dayName: "Montag",    breakfast: "overnightOats", lunch: "chickenRice",  dinner: "lightDinner" },
    { dayName: "Dienstag",  breakfast: "overnightOats", lunch: "chickenRice",  dinner: "skyrFruit" },
    { dayName: "Mittwoch",  breakfast: "overnightOats", lunch: "chickenRice",  dinner: "lightDinner" },
    { dayName: "Donnerstag",breakfast: "quarkBowl",     lunch: "tunaPasta",    dinner: "skyrFruit" },
    { dayName: "Freitag",   breakfast: "quarkBowl",     lunch: "tunaPasta",    dinner: "lightDinner" },
    { dayName: "Samstag",   breakfast: "proteinMuffins",lunch: "chickenRice",  dinner: "skyrFruit" },
    { dayName: "Sonntag",   breakfast: "proteinMuffins",lunch: "tunaPasta",    dinner: "lightDinner" }
  ],
  2: [ // Woche 2: etwas mehr Fisch
    { dayName: "Montag",    breakfast: "quarkBowl",     lunch: "tunaPasta",    dinner: "lightDinner" },
    { dayName: "Dienstag",  breakfast: "quarkBowl",     lunch: "tunaPasta",    dinner: "skyrFruit" },
    { dayName: "Mittwoch",  breakfast: "overnightOats", lunch: "salmonPotato", dinner: "lightDinner" },
    { dayName: "Donnerstag",breakfast: "overnightOats", lunch: "salmonPotato", dinner: "skyrFruit" },
    { dayName: "Freitag",   breakfast: "proteinMuffins",lunch: "chickenRice",  dinner: "lightDinner" },
    { dayName: "Samstag",   breakfast: "proteinMuffins",lunch: "chili",        dinner: "skyrFruit" },
    { dayName: "Sonntag",   breakfast: "quarkBowl",     lunch: "couscousTurkey", dinner: "lightDinner" }
  ],
  3: [
    { dayName: "Montag",    breakfast: "proteinMuffins",lunch: "chili",        dinner: "skyrFruit" },
    { dayName: "Dienstag",  breakfast: "quarkBowl",     lunch: "couscousTurkey", dinner: "lightDinner" },
    { dayName: "Mittwoch",  breakfast: "overnightOats", lunch: "chickenRice",  dinner: "skyrFruit" },
    { dayName: "Donnerstag",breakfast: "overnightOats", lunch: "tunaPasta",    dinner: "lightDinner" },
    { dayName: "Freitag",   breakfast: "quarkBowl",     lunch: "chili",        dinner: "skyrFruit" },
    { dayName: "Samstag",   breakfast: "proteinMuffins",lunch: "salmonPotato", dinner: "lightDinner" },
    { dayName: "Sonntag",   breakfast: "overnightOats", lunch: "chickenRice",  dinner: "skyrFruit" }
  ],
  // Ab Woche 4 wiederholen wir den Stil ‚Äì kannst du sp√§ter selbst variieren
  4: null,
  5: null,
  6: null,
  7: null,
  8: null,
  9: null,
  10: null
};

// F√ºr Wochen 4‚Äì10 einfach den Plan von Woche 3 kopieren (damit Code nicht riesig wird)
for (let w = 4; w <= 10; w++) {
  dailyPlan[w] = JSON.parse(JSON.stringify(dailyPlan[3]));
}

// grobe Einkaufslisten pro Woche (vereinfachte Version)
const weeklyShopping = {
  1: [
    "Haferflocken ~1 kg",
    "Skyr ~4‚Äì5 Becher",
    "Beeren (frisch oder TK) ~1‚Äì2 kg",
    "Magerquark ~3 Becher",
    "Mandeln 200 g",
    "Bananen/√Ñpfel ~1‚Äì2 kg",
    "H√§hnchenbrust ~1,8‚Äì2 kg",
    "Reis ~1‚Äì1,5 kg",
    "Gem√ºse (Brokkoli, Paprika, Zucchini) ~2 kg",
    "Thunfisch in Dosen 4‚Äì6",
    "Eier 10‚Äì15",
    "Blattsalat & Mischgem√ºse f√ºr Salat",
    "Oliven√∂l, Essig, Gew√ºrze"
  ],
  2: [
    "Magerquark 4‚Äì5 Becher",
    "Skyr 3‚Äì4 Becher",
    "Haferflocken ~1 kg",
    "Beeren ~1 kg",
    "Lachsfilet ~1,5 kg",
    "Kartoffeln ~2‚Äì3 kg",
    "Gem√ºse (Zucchini, Paprika, Brokkoli) ~2 kg",
    "Thunfisch 4‚Äì6 Dosen",
    "Vollkornnudeln ~1‚Äì1,5 kg",
    "H√§hnchenbrust ~1,5 kg",
    "Hackfleisch ~600 g",
    "Bohnen & Mais f√ºr Chili",
    "Salat & Rohkost"
  ],
  3: [
    "Haferflocken ~1 kg",
    "Skyr & Quark je 3‚Äì4 Becher",
    "Bananen & √Ñpfel ~2 kg",
    "Mandeln/N√ºsse 200‚Äì300 g",
    "H√§hnchenbrust ~1,5‚Äì2 kg",
    "Reis ~1‚Äì1,5 kg",
    "Gem√ºse-Mix ~2 kg",
    "Thunfisch 4‚Äì5 Dosen",
    "Lachs ~1,5 kg",
    "Hackfleisch ~600 g",
    "Bohnen, Mais, Tomaten f√ºr Chili",
    "Salat, Gurken, Tomaten"
  ]
};
for (let w = 4; w <= 10; w++) {
  weeklyShopping[w] = weeklyShopping[3]; // Vereinfachung
}

// ----------------------------
// Plan f√ºr Tag rendern
// ----------------------------

function getDayPlan(week, dayIdx) {
  const weekPlan = dailyPlan[week];
  if (!weekPlan) return null;
  return weekPlan[dayIdx];
}

function renderDay() {
  const week = parseInt(document.getElementById("weekSelect").value, 10);
  const dayIdx = parseInt(document.getElementById("daySelect").value, 10);
  const dayPlan = getDayPlan(week, dayIdx);
  const dayMealsDiv = document.getElementById("dayMeals");
  const dayRecipesDiv = document.getElementById("dayRecipes");
  const totalSpan = document.getElementById("dayTotal");

  if (!dayPlan) {
    dayMealsDiv.textContent = "Kein Plan gefunden.";
    dayRecipesDiv.textContent = "";
    totalSpan.textContent = "‚Äì";
    return;
  }

  const bf = recipesById[dayPlan.breakfast];
  const lu = recipesById[dayPlan.lunch];
  const di = recipesById[dayPlan.dinner];

  const bfKcal = bf.kcalPerPortion;
  const luKcal = lu.kcalPerPortion;
  const diKcal = di.kcalPerPortion;
  const total = bfKcal + luKcal + diKcal;

  dayMealsDiv.innerHTML = `
    <div class="meal-item">ü•£ Fr√ºhst√ºck: ${bf.name} ‚Äì <span class="kcal">${bfKcal} kcal</span></div>
    <div class="meal-item">üçõ Mittagessen: ${lu.name} ‚Äì <span class="kcal">${luKcal} kcal</span></div>
    <div class="meal-item">üçΩÔ∏è Abendessen: ${di.name} ‚Äì <span class="kcal">${diKcal} kcal</span></div>
  `;
  totalSpan.textContent = total.toFixed(0);

  // Rezepte f√ºr diesen Tag
  const used = [bf, lu, di];
  dayRecipesDiv.innerHTML = used.map(r => {
    const totalRecipeKcal = r.kcalPerPortion * r.portions;
    return `
      <details>
        <summary>${r.name} <small>(ergibt ${r.portions} Port., ca. ${r.kcalPerPortion} kcal/Port., ~${totalRecipeKcal} kcal gesamt)</small></summary>
        <p><b>Zutaten:</b></p>
        <ul>${r.ingredients.map(i => `<li>${i}</li>`).join("")}</ul>
        <p><b>Zubereitung:</b></p>
        <ul>${r.steps.map(s => `<li>${s}</li>`).join("")}</ul>
      </details>
    `;
  }).join("");
}

// ----------------------------
// Einkaufs-Liste rendern
// ----------------------------

function renderShopping() {
  const week = parseInt(document.getElementById("weekSelect").value, 10);
  const listDiv = document.getElementById("shoppingList");
  const items = weeklyShopping[week] || [];
  listDiv.innerHTML = items.map(i => `<div class="shopping-item">‚Ä¢ ${i}</div>`).join("");
}

// ----------------------------
// Gewicht speichern & anzeigen
// ----------------------------

function loadWeights() {
  try {
    return JSON.parse(localStorage.getItem("weights_10wochenplan") || "[]");
  } catch {
    return [];
  }
}

function saveWeights(data) {
  localStorage.setItem("weights_10wochenplan", JSON.stringify(data));
}

function renderWeights() {
  const data = loadWeights().sort((a,b) => a.date.localeCompare(b.date));
  const hist = document.getElementById("weightHistory");
  hist.innerHTML = data.map(e => `
    <div class="weight-item">${e.date}: <b>${parseFloat(e.weight).toFixed(1)} kg</b></div>
  `).join("");
}

function setupWeight() {
  const dateInput = document.getElementById("weightDate");
  const weightInput = document.getElementById("weightNumber");
  const btn = document.getElementById("saveWeightBtn");

  if (!dateInput.value) {
    dateInput.value = new Date().toISOString().slice(0,10);
  }

  btn.addEventListener("click", () => {
    const date = dateInput.value;
    const weight = parseFloat((weightInput.value || "").replace(",", "."));
    if (!date || isNaN(weight)) {
      alert("Bitte Datum und Gewicht eingeben.");
      return;
    }
    const data = loadWeights();
    const existing = data.find(d => d.date === date);
    if (existing) existing.weight = weight;
    else data.push({ date, weight });
    saveWeights(data);
    renderWeights();
    weightInput.value = "";
  });
}

// ----------------------------
// Alle Rezepte (√úbersicht)
// ----------------------------

function renderAllRecipes() {
  const container = document.getElementById("allRecipes");
  container.innerHTML = recipes.map(r => {
    const totalRecipeKcal = r.kcalPerPortion * r.portions;
    return `
      <details>
        <summary>${r.name} <small>(ergibt ${r.portions} Port., ca. ${r.kcalPerPortion} kcal/Port., ~${totalRecipeKcal} kcal gesamt)</small></summary>
        <p><b>Zutaten:</b></p>
        <ul>${r.ingredients.map(i => `<li>${i}</li>`).join("")}</ul>
        <p><b>Zubereitung:</b></p>
        <ul>${r.steps.map(s => `<li>${s}</li>`).join("")}</ul>
      </details>
    `;
  }).join("");
}

// ----------------------------
// Init
// ----------------------------

function init() {
  const weekSelect = document.getElementById("weekSelect");
  const daySelect = document.getElementById("daySelect");

  // Wochen 1‚Äì10
  for (let w = 1; w <= 10; w++) {
    const opt = document.createElement("option");
    opt.value = w;
    opt.textContent = `Woche ${w}`;
    weekSelect.appendChild(opt);
  }
  weekSelect.value = "1";

  // Tage Mo‚ÄìSo
  const names = ["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"];
  names.forEach((n, idx) => {
    const opt = document.createElement("option");
    opt.value = idx;
    opt.textContent = n;
    daySelect.appendChild(opt);
  });
  daySelect.value = "0";

  weekSelect.addEventListener("change", () => {
    renderDay();
    renderShopping();
  });
  daySelect.addEventListener("change", renderDay);

  renderDay();
  renderShopping();
  setupWeight();
  renderWeights();
  renderAllRecipes();
}

init();
</script>

</body>
</html>
